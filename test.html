<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Dark Mode ASCII Box</title>
	<style>
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
			box-shadow: 0 0 4px #f0f;
		}
		
		body {
			background: #000;
			color: #fff;
			display: flex;
			flex-direction: column;
			height: 100dvh;
			font-family: 'Courier New', monospace;
			font-size: 1.5rem;
			overflow: hidden;
		}
		
		#display-container {
			flex: 1;
			display: flex;
			justify-content: center;
			align-items: center;
			overflow-y: auto;
			padding: 2rem;
		}
		
		#display {
			white-space: pre;
			line-height: 1.2;
			letter-spacing: 0;
		}
		
		#input-container {
			padding: 1rem;
			background: #111;
			border-top: 1px solid #333;
			display: flex;
			flex-direction: column;
			gap: 0.75rem;
		}
		
		#editor {
			width: 100%;
			font-size: 1rem;
			font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
			background: #222;
			color: #fff;
			border: 1px solid #444;
			border-radius: 24px;
			outline: none;
			resize: none;
			padding: 0.75rem 1.25rem;
			line-height: 1.4;
			min-height: 48px;
			max-height: 120px;
			overflow-y: auto;
		}
		
		#editor:focus {
			border-color: #f0f;
		}
		
		.time-toggle {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			cursor: pointer;
			user-select: none;
			font-size: 0.9rem;
			color: #aaa;
		}
		
		.time-toggle input[type="checkbox"] {
			width: 44px;
			height: 24px;
			appearance: none;
			background: #333;
			border-radius: 12px;
			position: relative;
			cursor: pointer;
			transition: background 0.3s;
		}
		
		.time-toggle input[type="checkbox"]:checked {
			background: #f0f;
		}
		
		.time-toggle input[type="checkbox"]::after {
			content: '';
			position: absolute;
			width: 20px;
			height: 20px;
			border-radius: 50%;
			background: #fff;
			top: 2px;
			left: 2px;
			transition: transform 0.3s;
		}
		
		.time-toggle input[type="checkbox"]:checked::after {
			transform: translateX(20px);
		}
	</style>
</head>
<body>
	<div id="display-container">
		<pre id="display">┌─┐
│ │
└─┘</pre>
	</div>
	
	<div id="input-container">
		<textarea id="editor" placeholder="Type a message..." rows="1"> </textarea>
		<label class="time-toggle">
			<input type="checkbox" id="timeToggle">
			<span>Show Time</span>
		</label>
		<label class="time-toggle">
			<input type="checkbox" id="nameToggle">
			<span>Show Name</span>
		</label>
	</div>
	
	<script>
		const display = document.getElementById('display');
		const editor = document.getElementById('editor');
		const timeToggle = document.getElementById('timeToggle');
		const nameToggle = document.getElementById('nameToggle');
		const name = 'Alex';
		
		function getMilitaryTime() {
			const now = new Date();
			const hours = now.getHours().toString().padStart(2, '0');
			const minutes = now.getMinutes().toString().padStart(2, '0');
			return `${hours}:${minutes}`;
		}
		
		function updateBox() {
			const text = editor.value || ' ';
			const lines = text.split('\n');
			
			// Find the longest line
			let maxLength = 0;
			lines.forEach(line => {
				maxLength = Math.max(maxLength, line.length);
			});
			
			// Ensure minimum width based on what needs to be displayed
			let minWidth = 1;
			if (timeToggle.checked) minWidth = Math.max(minWidth, 5);
			if (nameToggle.checked) minWidth = Math.max(minWidth, name.length);
			maxLength = Math.max(maxLength, minWidth);
			
			// Build the ASCII box
			let box = '';
			
			// Top border
			if (nameToggle.checked) {
				const topLength = maxLength - name.length;
				if (topLength > 0) {
					box += '┌' + name + '─'.repeat(topLength) + '┐\n';
				} else {
					// If name is too long for the box, extend it
					maxLength = name.length;
					box += '┌' + name + '┐\n';
				}
			} else {
				box += '┌' + '─'.repeat(maxLength) + '┐\n';
			}
			
			// Content with side borders
			lines.forEach(line => {
				// Pad the line to match the max width
				const paddedLine = line.padEnd(maxLength, ' ');
				box += '│' + paddedLine + '│\n';
			});
			
			// Bottom border
			if (timeToggle.checked) {
				const time = getMilitaryTime();
				const bottomLength = maxLength - 5; // 5 chars for the time (HH:MM)
				if (bottomLength > 0) {
					box += '└' + '─'.repeat(bottomLength) + time + '┘';
				} else {
					// If box is too small, extend it
					maxLength = Math.max(maxLength, 5);
					// Rebuild entire box with correct width
					box = '';
					
					// Rebuild top
					if (nameToggle.checked) {
						const topLength = maxLength - name.length;
						if (topLength > 0) {
							box += '┌' + name + '─'.repeat(topLength) + '┐\n';
						} else {
							box += '┌' + name + '┐\n';
						}
					} else {
						box += '┌' + '─'.repeat(maxLength) + '┐\n';
					}
					
					// Rebuild content
					lines.forEach(line => {
						const paddedLine = line.padEnd(maxLength, ' ');
						box += '│' + paddedLine + '│\n';
					});
					
					box += '└' + time + '┘';
				}
			} else {
				box += '└' + '─'.repeat(maxLength) + '┘';
			}
			
			display.textContent = box;
		}
		
		// Update time every second if enabled
		setInterval(() => {
			if (timeToggle.checked) {
				updateBox();
			}
		}, 1000);
		
		// Toggle event listeners
		timeToggle.addEventListener('change', updateBox);
		nameToggle.addEventListener('change', updateBox);
		
		// Auto-resize textarea as user types
		function autoResize() {
			editor.style.height = 'auto';
			editor.style.height = Math.min(editor.scrollHeight, 120) + 'px';
		}
		
		// Update on every input
		editor.addEventListener('input', () => {
			updateBox();
			autoResize();
		});
		
		// Handle Enter key for new lines
		editor.addEventListener('keydown', (e) => {
			if (e.key === 'Tab') {
				e.preventDefault();
				const start = editor.selectionStart;
				const end = editor.selectionEnd;
				editor.value = editor.value.substring(0, start) + '  ' + editor.value.substring(end);
				editor.selectionStart = editor.selectionEnd = start + 2;
				updateBox();
				autoResize();
			}
		});
		
		// Initial setup
		editor.value = ' ';
		updateBox();
		editor.focus();
	</script>
</body>
</html>